<%- include('_bootstrap_meta') %>
<link rel="stylesheet" href="/css/company.css">

<body>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1 class="text-center">Interviews</h1>
        <div class="text-end">
          <a href="/company/allocate" type="button" class="btn btn-success">Allocate Interview</a>
        </div>
      </div>
    </div>

    <% if(students.length > 0) {%>
    <div class="mt-3 mb-3">
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Company</th>
              <th scope="col">Student</th>
              <th scope="col">Email</th>
              <th scope="col">Contact</th>
              <th scope="col">Batch</th>
              <th scope="col">Interview Date</th>
              <th scope="col">Result</th>
            </tr>
          </thead>
          <tbody>
            <% for(let student of students){%>
            <% for(let interview of student.interviews){ %>
            <tr class="row-ref">
              <td><%=interview.company%></td>
              <td><%=student.name%></td>
              <td><%=student.email%></td>
              <td><%=student.contactNumber%></td>
              <td><%=student.batch%></td>
              <td><%=interview.date%></td>
              <td>
                <form class="update-form" data-student-id="<%=student.id%>" data-company-name="<%=interview.company%>">
                  <input type="hidden" name="companyName" value="<%=interview.company%>" />
                  <select class="form-select" name="companyResult">
                    <option value="Selected" <% if(interview.result === 'Selected') { %> selected <% } %>>Selected</option>
                    <option value="Not Selected" <% if(interview.result === 'Not Selected') { %> selected <% } %>>Not Selected</option>
                    <option value="On Hold" <% if(interview.result === 'On Hold') { %> selected <% } %>>On Hold</option>
                    <option value="Pending" <% if(interview.result === 'Pending') { %> selected <% } %>>Pending</option>
                  </select>
                  <button type="submit" class="btn btn-warning btn-sm">Update</button>
                </form>
              </td>
            </tr>
            <% } %>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
    <% } else { %>
    <div class="w-75 mx-auto mt-5">
      <h2 class="text-center">No Records found</h2>
    </div>
    <% } %>
  </div>
  <%- include('_bootstrap_script') %>
  <script src="/js/company.js"></script>
</body>
